let TABS_DATA = [];
let WORKSPACES_DATA = [];
let AUTOEXECUTE_DATA = {};
let activeWorkspaceId = null;
let activeTabId = null;
let activeContextMenuTabId = null;
let activeContextMenuWorkspaceId = null;
let activeContextMenuType = null;
const MAX_TABS = 30;
const editors = {};
let autoSaveInterval = null;
let autoSaveTimeout = null;
let connectionCheckInterval = null;
let notificationsEnabled = true;
let currentFilter = 'all';
let selectedExecutor = 'hydrogen';
let killSwitchEnabled = false;
let currentScriptForSettings = null;

const loginView = document.getElementById('login-view');
const mainAppView = document.getElementById('main-app-view');
const loginForm = document.getElementById('login-form');
const usernameInput = document.getElementById('username-input');
const navScriptsBtn = document.getElementById('nav-scripts-btn');
const navEditorBtn = document.getElementById('nav-editor-btn');
const navConsoleBtn = document.getElementById('nav-console-btn');
const navSettingsBtn = document.getElementById('nav-settings-btn');
const navAboutBtn = document.getElementById('nav-about-btn');
const leftSidePanel = document.getElementById('left-side-panel');
const sidePanelToggleBtn = document.getElementById('side-panel-toggle-btn');
const sideProfileAvatar = document.getElementById('side-profile-avatar');
const sideProfileName = document.getElementById('side-profile-name');
const sideProfileNameInput = document.getElementById('side-profile-name-input');
const sideNotificationsBtn = document.getElementById('side-notifications-btn');
const sideNotificationBadge = document.getElementById('side-notification-badge');
const sideNotificationsPopup = document.getElementById('side-notifications-popup');
const sideNotificationsList = document.getElementById('side-notifications-list');
const sideNotificationsCloseBtn = document.getElementById('side-notifications-close-btn');
const onboardingAvatarGrid = document.getElementById('onboarding-avatar-grid');
const avatarPickerOverlay = document.getElementById('avatar-picker-overlay');
const avatarPickerGrid = document.getElementById('avatar-picker-grid');
const avatarPickerClose = document.getElementById('avatar-picker-close');
const sidePanelSlots = document.querySelectorAll('.side-panel-slot');
const scriptsPane = document.getElementById('scripts-pane');
const scriptsZexonPage = document.getElementById('scripts-zexon-page');
const scriptsScriptbloxPage = document.getElementById('scripts-scriptblox-page');
const scriptbloxHeaderTitle = document.getElementById('scriptblox-header-title');
const scriptbloxSearchInput = document.getElementById('scriptblox-search');
const scriptbloxStatus = document.getElementById('scriptblox-status');
const scriptbloxCardsContainer = document.getElementById('scriptblox-cards-container');
const scriptbloxPrevBtn = document.getElementById('scriptblox-prev-btn');
const scriptbloxNextBtn = document.getElementById('scriptblox-next-btn');
const scriptbloxPageLabel = document.getElementById('scriptblox-page-label');
const scriptbloxPagination = document.querySelector('.scriptblox-pagination');
const scriptsSourceZexonBtn = document.getElementById('scripts-source-zexon-btn');
const scriptsSourceScriptbloxBtn = document.getElementById('scripts-source-scriptblox-btn');
const editorPane = document.getElementById('editor-pane');
const consolePane = document.getElementById('console-pane');
const settingsPane = document.getElementById('settings-pane');
const aboutPane = document.getElementById('about-pane');
const scriptTabBar = document.getElementById('script-tab-bar');
const newTabBtn = document.getElementById('new-tab-btn');
const autoexecuteManagerBtn = document.getElementById('autoexecute-manager-btn');
const editorArea = document.getElementById('editor-area');
const killSwitchBtn = document.getElementById('kill-switch-btn');
const executeBtn = document.getElementById('execute-btn');
const workspaceList = document.getElementById('workspace-list');
const workspaceAddBtn = document.getElementById('workspace-add-btn');
const contextMenu = document.getElementById('context-menu');
const autoSaveToggle = document.getElementById('auto-save-toggle');
const animationsToggle = document.getElementById('animations-toggle');
const navMotionToggle = document.getElementById('nav-motion-toggle');
const navSpeedSlider = document.getElementById('nav-speed-slider');
const editorSizeSlider = document.getElementById('editor-size-slider');
const editorSizeValue = document.getElementById('editor-size-value');
const editorLineNumbersToggle = document.getElementById('editor-line-numbers-toggle');
const editorActiveLineToggle = document.getElementById('editor-active-line-toggle');
const editorAutocompleteToggle = document.getElementById('editor-autocomplete-toggle');
const editorLineWrapToggle = document.getElementById('editor-line-wrap-toggle');
const effectsToggle = document.getElementById('effects-toggle');
const saveIndicatorToggle = document.getElementById('save-indicator-toggle');
const discordRpcToggle = document.getElementById('discord-rpc-toggle');
const notificationsToggle = document.getElementById('notifications-toggle');
const rbxConsoleLoggingToggle = document.getElementById('rbx-console-logging-toggle');
const executorSelector = document.getElementById('executor-selector');
const executorSelectorBtn = document.getElementById('executor-selector-btn');
const executorSelectorMenu = document.getElementById('executor-selector-menu');
const executorSelectedIcon = document.getElementById('executor-selected-icon');
const executorSelectedLabel = document.getElementById('executor-selected-label');
const executorOptions = document.querySelectorAll('.executor-option');
const renameUserBtn = document.getElementById('rename-user-btn');
const clearDataBtn = document.getElementById('clear-data-btn');
const renameModalOverlay = document.getElementById('rename-modal-overlay');
const renameModalInput = document.getElementById('rename-modal-input');
const renameModalSaveBtn = document.getElementById('rename-modal-save');
const renameModalCancelBtn = document.getElementById('rename-modal-cancel');
const robloxStatusIndicator = document.getElementById('roblox-status-indicator');
const robloxStatusText = document.getElementById('roblox-status-text');
const executorStatusIndicator = document.getElementById('executor-status-indicator');
const saveIndicator = document.getElementById('save-indicator');
const scriptSearchBox = document.getElementById('script-search-box');
const confirmModalOverlay = document.getElementById('confirm-modal-overlay');
const consoleConsentBanner = document.getElementById('console-consent-banner');
const consoleDisabledBanner = document.getElementById('console-disabled-banner');
const consoleShowPathBtn = document.getElementById('console-show-path-btn');
const consoleAcceptBtn = document.getElementById('console-accept-btn');
const consoleClearBtn = document.getElementById('console-clear-btn');
const consoleLogList = document.getElementById('console-log-list');
const consoleSideLoggingStatus = document.getElementById('console-side-logging-status');
const consoleSideTotalLogs = document.getElementById('console-side-total-logs');
const consoleSideErrorLogs = document.getElementById('console-side-error-logs');
const consoleSideWarnLogs = document.getElementById('console-side-warn-logs');
const consoleSideExecutor = document.getElementById('console-side-executor');
const settingsSideBuildVersion = document.getElementById('settings-side-build-version');
const settingsSideLatestVersion = document.getElementById('settings-side-latest-version');
const settingsSideDataSize = document.getElementById('settings-side-data-size');
const settingsSideExecutor = document.getElementById('settings-side-executor');
const aboutSideBuildVersion = document.getElementById('about-side-build-version');
const aboutSideLatestStatus = document.getElementById('about-side-latest-status');
const autoexecuteModalOverlay = document.getElementById('autoexecute-modal-overlay');
const autoexecuteModalClose = document.getElementById('autoexecute-modal-close');
const autoexecuteDirectoryList = document.getElementById('autoexecute-directory-list');
